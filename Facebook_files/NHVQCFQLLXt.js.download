if (self.CavalryLogger) { CavalryLogger.start_js(["iyrm+"]); }

__d("TahoeGridViewEndScreenItem.react",["cx","fbt","CssBackgroundImage.react","LineClamp.react","Link.react","React","TahoeLoggerEvent","UFIReactionsBlingTokens.react","URI","VideoDuration.react","XUIText.react","gkx","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=3,j=16/9;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=this.props,d=c.permalink,e=c.thumbURI,f=c.imageWidth,g=c.title,k=c.viewCount,l=c.feedback,m=c.duration,n=c.isLive,o=c.isSpherical;c=c.style;if(f<=0)return null;var p=l&&l.reactioncount;p=p&&p>0;var q=b("gkx")("678922");return b("React").createElement("div",{className:"_1iwg"+(q?" _6p3t":""),style:c},b("React").createElement(b("Link.react"),{href:new(b("URI"))(d),onClick:function(){return a.props.logEvent(b("TahoeLoggerEvent").GRID_VIEW_END_SCREEN_CLICK_VIDEO)}},b("React").createElement("div",{className:"_1iwh"},b("React").createElement(b("CssBackgroundImage.react"),{height:f/j,width:f,imageURI:e,backgroundPosition:"50% 50%",className:"_6rcn"}),b("React").createElement("div",{className:"_1iwj"}),b("React").createElement("div",{className:"_6p3u"},g?b("React").createElement("div",{className:"_64dj _6p3v _1iw-"},b("React").createElement(b("LineClamp.react"),{lines:2,fitHeightToShorterText:!0},b("React").createElement(b("XUIText.react"),{size:"header4",weight:"bold"},g))):null,b("React").createElement("div",{className:"_64dn _6p3v"},k>0?b("React").createElement(b("XUIText.react"),{size:"meta1",className:"_64dj _31wk"},h._({"*":"{number} views","_1":"1 view"},[h._plural(k,"number",b("intlSummarizeNumber")(k))])):null,p&&l?b("React").createElement("div",{className:"_4ar- _64do _64dj"},b("React").createElement(b("UFIReactionsBlingTokens.react"),{feedback:l,max:i,size:"16",noLinks:!0},b("React").createElement("div",null,l.reactioncountreduced))):null,b("React").createElement("div",{className:"_2exg _6p3v"},b("React").createElement(b("VideoDuration.react"),{duration:m,isLive:n,isSpherical:o})))))))};return c}(b("React").Component);e.exports=a}),null);
__d("TahoeGridViewEndScreen.react",["cx","fbt","CenteredContainer.react","Image.react","React","ReactDOM","ResizeListener","TahoeGridViewEndScreenItem.react","TahoeLoggerEvent","gkx","shallowCompare"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=400,j=800,k=500,l=1350,m=840,n=.6,o=16/9,p=44,q=98,r=8;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.$2=null,c.state={colCount:0,rowCount:0,itemWidth:0,rootHorizPadding:p},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$2=b("ResizeListener").add(function(){return a.$3()});this.$3();this.props.logEvent(b("TahoeLoggerEvent").GRID_VIEW_END_SCREEN_SHOWN)};d.componentWillUnmount=function(){this.$2&&this.$2.remove()};d.shouldComponentUpdate=function(a,c){return b("shallowCompare")(this,a,c)};d.render=function(){var a=this,c=this.props.videosData;if(c.length===0)return this.$4();var d=this.$5(),e=this.state.colCount*this.state.rowCount;return b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!0,vertical:!0,ref:function(b){a.$1=b},style:{padding:"0 "+this.state.rootHorizPadding/2+"px"}},c?b("React").createElement("div",{className:"_1vgj"},b("React").createElement("div",{className:"_2oqk _2pip"},h._("More videos you may like")),c.slice(0,e).map(function(b){return a.$6(b,d)})):null)};d.$4=function(){return b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!0,vertical:!0},b("React").createElement("div",{className:"_2gqa"},b("React").createElement(b("Image.react"),{onClick:this.props.onReplay,src:"/images/video/channel_view/replay.svg"})))};d.$3=function(){__p&&__p();var a=this.$1&&b("ReactDOM").findDOMNode(this.$1);if(!a||!a instanceof Element)return;var c=this.props.videosData.length;if(c===0)return;var d=a.clientWidth;a=a.clientHeight;c=this.$7(c,d,a);var e=c.colCount;c=c.rowCount;d=this.$8(e,c,d,a);this.setState({colCount:e,rowCount:c,itemWidth:d})};d.$7=function(a,c,d){if(b("gkx")("678921")){var e=this.$9(c,[{minLength:l,count:4},{minLength:j,count:3},{minLength:0,count:2}]),f=this.$9(d,[{minLength:m,count:4},{minLength:k,count:3},{minLength:i,count:2},{minLength:0,count:1}]);f=Math.min(f,e);while(e*f>a)e<=f?f--:e--;return{colCount:e,rowCount:f}}return c>=j&&d>=k&&a>=9?{colCount:3,rowCount:3}:a>=4?{colCount:2,rowCount:2}:{colCount:1,rowCount:1}};d.$9=function(a,b){return b.reduce(function(b,c){return b===0&&a>=c.minLength?c.count:b},0)};d.$8=function(a,b,c,d){if(a===1)return c*n;var e=c-p;d=d-q;e=Math.min(e/a,d/b*o);d=c-e*a;this.setState({rootHorizPadding:d});e-=r;return isNaN(e)?0:e};d.$6=function(a,c){var d=a.id,e=a.permalink,f=a.thumbURI;return!d||!e||!f?null:b("React").createElement(b("TahoeGridViewEndScreenItem.react"),babelHelpers["extends"]({},a,{key:d,imageWidth:this.state.itemWidth,style:c,logEvent:this.props.logEvent}))};d.$5=function(){var a=this.state,b=a.colCount;a=a.rowCount;b=b!==0?(100/b).toString()+"%":"0";a=a!==0?(100/a).toString()+"%":"0";return{width:b,maxHeight:a}};return c}(b("React").Component);e.exports=a}),null);
__d("TahoeLivingRoomPill.react",["ix","cx","fbt","Image.react","React","Text.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_4s4e _6jsd"},b("React").createElement(b("Image.react"),{className:"_4s4f",src:g("487848")}),b("React").createElement(b("Text.react"),{className:"_4s4g"},i._("Watch party")))};return c}(b("React").Component);e.exports=a}),null);
__d("TahoeUpNextOverlay.react",["cx","fbt","ix","Badge.react","CenteredContainer.react","CssBackgroundImage.react","Image.react","Layout.react","LineClamp.react","Link.react","React","Tahoe","TahoeEndScreenProgressCircle.react","TahoeLivingRoomPill.react","TahoeLoggerEvent","URI","VideoDuration.react","VideoPlayerReason","XUIGrayText.react","XUIText.react","asset","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("Layout.react").Column,k=b("Layout.react").FillColumn,l=145,m=257,n=52;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={shown:!0},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this,c=this.props,d=c.ownerName,e=c.thumbURI,f=c.title,g=c.viewCount,o=c.duration,p=c.isLive,q=c.isSpherical,r=c.isLivingRoom;c=c.queueCount;var s=this.props.shouldAutoChain&&this.state.shown;return b("React").createElement(b("Layout.react"),{className:"_64gd"+(s?"":" _1yks")},b("React").createElement(j,{className:r?"_6ju4":""},b("React").createElement(b("Link.react"),{onClick:function(){return a.$1(!1)}},b("React").createElement(b("CssBackgroundImage.react"),{height:l,width:m,imageURI:e,backgroundPosition:"50% 50%",className:"_6rcn"}),r?b("React").createElement(b("TahoeLivingRoomPill.react"),null):null,b("React").createElement(b("CenteredContainer.react"),{className:"_4m5g",horizontal:!0,vertical:!0,fullHeight:!0},b("React").createElement("div",{className:"_4m83"},b("React").createElement(b("TahoeEndScreenProgressCircle.react"),{makeProgress:s&&this.props.makeProgress,circleDiameter:n,onProgressDone:function(){return a.$1(!0)},timeoutSec:this.props.countdownTimeoutSec},b("React").createElement(b("Image.react"),{className:"_4m8c",src:i("101657")})),b("React").createElement("div",{className:"_4m8d"},h._("UP NEXT")))),o?b("React").createElement("div",{className:"_4m8e"},b("React").createElement(b("VideoDuration.react"),{isLive:p,isSpherical:q,duration:o})):null)),b("React").createElement(k,{className:"_64ge"},b("React").createElement("div",{className:"_64gf"},f?b("React").createElement("div",{className:"_64gj"},b("React").createElement(b("Link.react"),{onClick:function(){return a.$1(!1)}},b("React").createElement(b("LineClamp.react"),{lines:3,fitHeightToShorterText:!0,enableTooltipOnOverflow:!0},b("React").createElement(b("XUIText.react"),{size:"header4",weight:"bold"},f)))):null,d?b("React").createElement("div",{className:"_2pim"},b("React").createElement(b("LineClamp.react"),{lines:1,enableTooltipOnOverflow:!0},b("React").createElement(b("XUIGrayText.react"),{size:"meta1"},d),this.$2())):null,r&&c?b("React").createElement(b("XUIGrayText.react"),{display:"block",size:"meta1"},h._("{queue_count} videos",[h._param("queue_count",c)])):null,g>0?r?this.$3(g):b("React").createElement(b("XUIGrayText.react"),{display:"block",size:"meta1"},h._({"*":"{number} views","_1":"1 view"},[h._plural(g,"number",b("intlSummarizeNumber")(g))])):null),b("React").createElement("div",{className:"_64gk"},b("React").createElement(b("Link.react"),{onClick:function(){return a.$4()}},b("React").createElement(b("Image.react"),{className:"_64gl",src:i("368787")}),b("React").createElement(b("XUIText.react"),{className:"_64gl _2pir",size:"header3"},h._("Cancel"))))))};d.$3=function(a){a=a>1?b("React").createElement(b("XUIGrayText.react"),{display:"block",size:"meta1"},h._("{view counter} watching now",[h._param("view counter",b("intlSummarizeNumber")(a))])):null;return a};d.$4=function(){this.$5(),this.props.onDismiss(),this.props.logEvent(b("TahoeLoggerEvent").UP_NEXT_OVERLAY_CANCEL)};d.$1=function(a){this.$5();if(a&&!this.props.shouldAutoChain)return;var c=b("Tahoe").get();c&&c.setPlayReason(a?b("VideoPlayerReason").AUTOPLAY:b("VideoPlayerReason").USER);c=this.props.permalink;c&&b("URI").go(c);a?this.props.logEvent(b("TahoeLoggerEvent").UP_NEXT_OVERLAY_REDIRECT_ON_COUNTDOWN_FINISHED):this.props.logEvent(b("TahoeLoggerEvent").UP_NEXT_OVERLAY_REDIRECT_ON_CLICK)};d.$5=function(){this.setState({shown:!1})};d.$2=function(){var a=this.props,c=a.isOwnerBlueVerified;a=a.isOwnerGrayVerified;return!c&&!a?null:b("React").createElement("span",{className:"_3h80"},c?b("React").createElement(b("Badge.react"),{size:"small",type:"verified"}):b("React").createElement(b("Badge.react"),{size:"small",type:"page_gray_check"}))};return c}(b("React").Component);e.exports=a}),null);
__d("XTahoeLivingRoomDataAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/tahoe/living_room_data/",{living_room_id:{type:"FBID",required:!0}})}),null);
__d("TahoeUpNextOverlayAndEndScreen.react",["cx","Arbiter","AsyncRequest","React","SubscriptionsHandler","TahoeGridViewEndScreen.react","TahoeLoggerEvent","TahoeUpNextOverlay.react","VideoPlayerReason","VideoPlayerStates","XTahoeLivingRoomDataAsyncController","XTahoeVideoDataAsyncController","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={videosData:[],makeProgress:!0,isUpNextOverlayDismissed:!1,isVideoFinished:d.props.vpc.getState()===b("VideoPlayerStates").FINISHED,isInTahoe:d.props.vpc.getSource()==="tahoe",isCommentBoxFocused:!1},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this;this.props.livingRoomID!==null&&this.props.livingRoomID!==void 0?this.$2():this.props.videoIDs.length>0&&this.$3();this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(this.props.vpc.addListener("stateChange",function(){return a.$4()}));this.$1.addSubscriptions(this.props.vpc.addListener("TahoeController/exitTahoe",function(){a.setState({isInTahoe:!1})}));this.$1.addSubscriptions(this.props.vpc.addListener("TahoeController/enterTahoe",function(){a.setState({isInTahoe:!0})}));this.$1.addSubscriptions(b("Arbiter").subscribeOnce(["UFIAddComment/focus","comment_content_change"],function(){b("gkx")("678923")&&(a.setState({isCommentBoxFocused:!0}),a.props.logEvent(b("TahoeLoggerEvent").AUTOCHAIN_CANCELLED))}));this.props.logEvent(b("TahoeLoggerEvent").UP_NEXT_OVERLAY_SHOWN)};d.componentWillUnmount=function(){this.$1.release()};d.shouldComponentUpdate=function(a,b){return!(b.videosData.length===0)};d.render=function(){if(this.state.isCommentBoxFocused||!this.props.shouldShowUpNextOverlay||!this.props.countdownTimeoutSec)return this.state.isVideoFinished&&this.state.isInTahoe?this.$5():null;var a=null;this.state.isVideoFinished&&(this.state.isUpNextOverlayDismissed||this.props.videoIDs.length===0?a=this.$5():this.props.hasCustomBackgroundForUpNextOverlay||(a=this.$6()));return b("React").createElement("div",{className:"_1a5j _3htz _4ubd"+(this.state.isInTahoe?"":" hidden_elem")},a,this.$7())};d.$2=function(){var a=this;new(b("AsyncRequest"))(b("XTahoeLivingRoomDataAsyncController").getURIBuilder().setFBID("living_room_id",this.props.livingRoomID).getURI()).setHandler(function(b){b=(b=b)!=null?(b=b.payload)!=null?b.videosData:b:b;b&&b.length>0?a.setState({videosData:b}):a.$3()}).send()};d.$3=function(){var a=this;new(b("AsyncRequest"))(b("XTahoeVideoDataAsyncController").getURIBuilder().setFBIDSet("video_ids",this.props.videoIDs).getURI()).setHandler(function(b){b=(b=b)!=null?(b=b.payload)!=null?b.videosData:b:b;b&&b.length>0&&a.setState({videosData:b})}).send()};d.$7=function(){var a=this;if(this.state.videosData.length===0)return null;var c=this.state.videosData[0],d=this.props.countdownTimeoutSec;if(!c||!d)return null;c.isLivingRoom=c.queueCount!=null;return b("React").createElement(b("TahoeUpNextOverlay.react"),babelHelpers["extends"]({},c,{countdownTimeoutSec:d,shouldAutoChain:!this.state.isCommentBoxFocused,makeProgress:this.state.isInTahoe&&this.state.makeProgress,onDismiss:function(){a.setState({isUpNextOverlayDismissed:!0})},logEvent:this.props.logEvent}))};d.$4=function(){__p&&__p();var a=this.props.vpc;a=a.getState();switch(a){case b("VideoPlayerStates").PAUSED:this.setState({makeProgress:!1});break;case b("VideoPlayerStates").PLAYING:!this.state.isUpNextOverlayDismissed&&!this.state.makeProgress&&this.setState({makeProgress:!0});break;case b("VideoPlayerStates").FINISHED:this.setState({isVideoFinished:!0});!this.state.isUpNextOverlayDismissed&&!this.state.makeProgress&&this.setState({makeProgress:!0});break}};d.$5=function(){var a=this;return b("React").createElement("div",{className:"_3rl2 _2se8"},b("React").createElement(b("TahoeGridViewEndScreen.react"),{videosData:this.state.videosData,onReplay:this.props.isCurrentVideoReplayable?function(){a.props.vpc.play(b("VideoPlayerReason").USER)}:null,logEvent:this.props.logEvent}),",")};d.$6=function(){return b("React").createElement("div",{className:"_3rl2 _zkf"})};return c}(b("React").Component);e.exports=a}),null);